/** @format */

.woocommerce-search {
	position: relative;
	min-width: 0;

	> div {
		min-width: 0;
	}

	.woocommerce-search__icon {
		position: absolute;
		top: 10px;
		left: 10px;
		fill: $core-grey-light-900;
	}

	.woocommerce-tag {
		max-width: 100%;
	}

	.woocommerce-tag .woocommerce-tag__text {
		max-width: calc(100% - 24px);
	}

	&:not(.has-inline-tags) {
		.woocommerce-tag {
			margin: 8px 6px 0 0;
		}
	}

	&.has-inline-tags {
		.woocommerce-search__icon {
			top: 50%;
			transform: translateY(-50%);
		}
	}

	.woocommerce-search__inline-container {
		width: 100%;
		padding: 4px 2px 4px 36px;
		border: 1px solid $core-grey-light-700;
		background-color: $studio-white;
		display: flex;
		align-items: center;
		position: relative;

		&.is-active {
			border-color: $input-active-border;
			box-shadow: inset 0 0 0 $input-active-inner, 0 0 1px 2px $input-active-outer;
		}

		&.has-tags {
			padding-right: 36px;
		}

		.woocommerce-search__token-list {
			max-width: 100%;
			display: inline-block;
			padding: 1px 0;
		}
	}

	.woocommerce-search__inline-input,
	.woocommerce-search__inline-input:focus {
		border: none;
		outline: none;
		box-shadow: none;
		padding: 2px 0;
		line-height: 20px;
		max-width: 100%;
		min-width: 70px;
		font-size: inherit;
		vertical-align: middle;

		&[type='number']::-webkit-outer-spin-button,
		&[type='number']::-webkit-inner-spin-button {
			-webkit-appearance: none;
			margin: 0;
		}
	}

	.woocommerce-search__input {
		width: 100%;
		padding: $gap-smaller $gap-small $gap-smaller 36px;
		border: 1px solid $core-grey-light-700;
	}

	.woocommerce-search__autocomplete-results {
		display: flex;
		flex-direction: column;
		align-items: stretch;
		border: 1px solid $core-grey-light-700;
		position: absolute;
		left: 0;
		right: 0;
		z-index: 10;

		&:empty {
			display: none;
		}

		&.is-static-results {
			position: static;
		}
	}

	// This a single `button` in the autocomplete popover
	.woocommerce-search__autocomplete-result {
		margin-bottom: 0;
		display: flex;
		flex-direction: row;
		flex-grow: 1;
		flex-shrink: 0;
		align-items: center;
		padding: $gap-small;
		color: $studio-woocommerce-purple;
		text-align: left;
		background: $core-grey-light-100;
		border-bottom: 1px solid $core-grey-light-500;

		&:last-of-type {
			border-bottom: none;
		}

		&:hover {
			box-shadow: none;
			color: $studio-woocommerce-purple;
			background: $core-grey-light-200;
		}

		&.is-selected,
		&:focus,
		&:active {
			color: $studio-woocommerce-purple;
			background: $studio-white;
			box-shadow: inset 0 0 0 1px $core-grey-light-200, inset 0 0 0 2px $wp-admin-sidebar;
		}

		.woocommerce-search__result-thumbnail {
			margin-right: $gap-small;
		}
	}
}

.woocommerce-search__result-name {
	text-decoration: underline; // @todo Not actually a link, should underline?
}

.woocommerce-search__clear {
	position: absolute;
	right: 10px;
	top: calc(50% - 10px);

	& > .dashicon {
		color: #c9c9c9;
	}
}
